(()=>{"use strict";function e(){const e=document.querySelector("#loader");e&&(e.style.display="none")}window.onload=function(){console.log("Window loaded!"),function(){const o=document.querySelector("#login-btn"),n=document.querySelector("#loginUsername"),l=document.querySelector("#loginPassword");if(null==o||null==n||null==l)throw new Error("One or many elements are null");o.addEventListener("click",(o=>{o.preventDefault();const r=n.value,t=l.value;!function(){const e=document.querySelector("#loader");e&&(e.style.display="block")}(),fetch("/api/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:t})}).then((e=>(console.log(e),e.json()))).then((o=>{if(e(),null==o.message)throw new Error("Server returned an invalid response: no message field found");if(null==o.success||0==o.success)throw new Error(`${o.message}`);console.log("Login OK!"),window.location.href="/dashboard"})).catch((o=>{e(),console.error("Error:",o),alert(`Failed to login: ${o}`)}))}))}()}})();